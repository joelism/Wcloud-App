<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>Wcloud App – Privates Protokoll (18+)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
</head>
<body>
  <div id="login">
    <div id="loginHint">
      Hinweis: Dieses Tool ist nur zur privaten Selbstbeobachtung gedacht. Keine minderjährigen oder illegalen Inhalte. Alle Daten bleiben lokal in deinem Browser.
    </div>
    <div id="loginCard">
      <h2>Anmelden</h2>
      <form id="loginForm">
        <label for="pinInput">PIN</label>
        <input id="pinInput" type="password" inputmode="numeric" autocomplete="off" />
        <button type="submit" class="btn btn-primary">Entsperren</button>
        <div id="loginError" hidden>Falsche PIN.</div>
      </form>
    </div>
  </div>

  
  <div id="startOverlay" hidden>
    <div class="start-overlay-inner">
      <div class="start-logo-block">
        <div class="start-cloud"></div>
        <div class="start-title">Wcloud App</div>
      </div>
      <div class="start-buttons">
        <button id="startEntries" class="start-btn">Einträge</button>
        <button id="startWheel" class="start-btn">Wheel</button>
        <button id="startSettings" class="start-btn">Einstellungen</button>
      </div>
    </div>
  </div>

<div id="app" hidden>
    <div class="card">
      <header>
        <div class="logo">Wcloud<br/>App</div>
        <div>
          <h1>Wcloud App – Privates Protokoll (18+)</h1>
          <p class="muted subtitle">Neutraler, lokaler Tracker – Daten bleiben in deinem Browser.</p>
        </div>
      </header>

      <div id="mainTabs" style="display:none;">
        <button class="tab active" data-tab="capture">Neuer Eintrag</button>
        <button class="tab" data-tab="history">Verlauf</button>
        <button class="tab" data-tab="analysis">Analyse</button>
        <button class="tab" data-tab="wheel">wcloud-wheel</button>
        <button class="tab" data-tab="settings">Einstellungen</button>
      </div>

      <!-- Capture -->
    <section id="capture" class="tabPanel activePanel">
      <div class="card">
        <h2>Neuer Eintrag</h2>
        <p class="muted">Speichere eine Session mit Zeitpunkt, Inhalt und optionalen Details.</p>
        <form id="sessionForm" style="margin-top:0.6rem;">
          <div class="row wrap">
            <div style="flex:1 1 160px;">
              <label for="dt">Datum &amp; Zeit</label>
              <input id="dt" type="datetime-local" />
            </div>
            <div style="flex:1 1 140px;">
              <label for="content">Inhalt</label>
              <select id="content">
                <option value="Wcloud112">Wcloud112</option>
                <option value="Wcloud113">Wcloud113</option>
                <option value="Wcloud114">Wcloud114</option>
                <option value="Wcloud115">Wcloud115</option>
                <option value="Wcloud116">Wcloud116</option>
                <option value="Wcloud117">Wcloud117</option>
                <option value="Wcloud App">Wcloud App</option>
              </select>
            </div>
          </div>

          <div style="margin-top:0.6rem;">
            <label for="personName">Name (optional)</label>
            <input id="personName" type="text" placeholder="z.B. Vorname" />
          </div>

          <div style="margin-top:0.6rem;">
            <label>Feuchtigkeit</label>
            <div class="radioGroup">
              <label class="inline"><input type="radio" name="wet" value="Sehr feucht" /> Sehr feucht</label>
              <label class="inline"><input type="radio" name="wet" value="Feucht" /> Feucht</label>
              <label class="inline"><input type="radio" name="wet" value="Weniger feucht" /> Weniger feucht</label>
              <label class="inline"><input type="radio" name="wet" value="Trocken" /> Trocken</label>
            </div>
          </div>

          <div style="margin-top:0.6rem;">
            <label>Geschlecht (Ausdruck)</label>
            <div class="radioGroup">
              <label class="inline"><input type="radio" name="gender" value="Männlich" /> Männlich</label>
              <label class="inline"><input type="radio" name="gender" value="Weiblich" /> Weiblich</label>
              <label class="inline"><input type="radio" name="gender" value="Divers / Unklar" /> Divers / Unklar</label>
            </div>
          </div>

          <div style="margin-top:0.6rem;">
            <label>Porno</label>
            <div class="radioGroup">
              <label class="inline"><input type="radio" name="porn" value="Mit" /> Mit</label>
              <label class="inline"><input type="radio" name="porn" value="Ohne" /> Ohne</label>
            </div>
          </div>

          <div style="margin-top:0.9rem;">
            <button type="submit" class="btn btn-primary">Eintrag speichern</button>
          </div>
        </form>
      </div>
    </section>

    <!-- History -->
    <section id="history" class="tabPanel">
      <div class="card">
        <h2>Verlauf</h2>
        <p class="muted">Filtere deine Einträge nach Datum, Inhalt, Geschlecht oder Porno.</p>

        <div style="margin-top:0.6rem; display:flex; flex-direction:column; gap:0.45rem;">
          <div class="row wrap">
            <div style="flex:1 1 140px;">
              <label for="searchDate">Datum</label>
              <input id="searchDate" type="date" />
            </div>
            <div style="flex:1 1 140px;">
              <label for="filterContent">Inhalt</label>
              <select id="filterContent">
                <option value="">(alle)</option>
                <option value="Wcloud112">Wcloud112</option>
                <option value="Wcloud113">Wcloud113</option>
                <option value="Wcloud114">Wcloud114</option>
                <option value="Wcloud115">Wcloud115</option>
                <option value="Wcloud116">Wcloud116</option>
                <option value="Wcloud117">Wcloud117</option>
                <option value="Wcloud App">Wcloud App</option>
              </select>
            </div>
          </div>

          <div class="row wrap">
            <div style="flex:1 1 140px;">
              <label for="filterGender">Geschlecht</label>
              <select id="filterGender">
                <option value="">(alle)</option>
                <option value="Männlich">Männlich</option>
                <option value="Weiblich">Weiblich</option>
                <option value="Divers / Unklar">Divers / Unklar</option>
              </select>
            </div>
            <div style="flex:1 1 140px;">
              <label for="filterPorn">Porno</label>
              <select id="filterPorn">
                <option value="">(alle)</option>
                <option value="Mit">Mit</option>
                <option value="Ohne">Ohne</option>
              </select>
            </div>
          </div>

          <div>
            <button id="clearFilters" class="btn btn-secondary btn-small">Filter zurücksetzen</button>
          </div>
        </div>

        <div id="historyList" style="margin-top:0.8rem;"></div>
      </div>
    </section>

    <!-- Analysis -->
    <section id="analysis" class="tabPanel">
      <div class="card">
        <h2>Analyse</h2>
        <div id="statsSummary" class="muted" style="margin-top:0.3rem;"></div>

        <h3 style="margin-top:1rem; font-size:1rem;">Verläufe</h3>
        <div id="perDay" style="margin-top:0.25rem;"></div>

        <h3 style="margin-top:0.9rem; font-size:1rem;">Wochentage</h3>
        <div id="weekdayBars" style="margin-top:0.25rem;"></div>

        <h3 style="margin-top:0.9rem; font-size:1rem;">Geschlecht</h3>
        <div id="genderBars" style="margin-top:0.25rem;"></div>

        <h3 style="margin-top:0.9rem; font-size:1rem;">Porno</h3>
        <div id="pornBars" style="margin-top:0.25rem;"></div>

        <h3 style="margin-top:0.9rem; font-size:1rem;">Inhalt</h3>
        <div id="contentBars" style="margin-top:0.25rem;"></div>

        <h3 style="margin-top:0.9rem; font-size:1rem;">Namen</h3>
        <div id="nameBars" style="margin-top:0.25rem;"></div>

        <h3 style="margin-top:0.9rem; font-size:1rem;">Feuchtigkeit</h3>
        <div id="wetBars" style="margin-top:0.25rem;"></div>

        <div style="margin-top:1rem;">
          <button id="exportCsv" class="btn btn-secondary btn-small">CSV-Export</button>
        </div>
      </div>
    </section>

    <!-- wcloud-wheel -->
    <section id="wheel" class="tabPanel">
      <div class="card">
        <h2>wcloud-wheel</h2>
        <p class="muted">
          Das Wheel zeigt zufällig Bilder aus deinem Bild-Pool (URLs), den du im Tab „Einstellungen“ verwaltest.
        </p>

        <div class="row wrap" style="margin-top:0.75rem; gap:0.75rem;">
          <span>Modus:</span>
          <label class="tagChip">
            <input type="radio" name="wheelMode" value="regular" checked style="margin-right:0.25rem;" />
            Regulär (Zufallsbilder)
          </label>
          <label class="tagChip">
            <input type="radio" name="wheelMode" value="nameWheel" style="margin-right:0.25rem;" />
            Namen-Wheel
          </label>
        </div>

        <div id="wheelRegularControls" class="row wrap" style="margin-top:0.75rem;">
          <label for="wheelBatchSize">Anzahl pro Klick:</label>
          <select id="wheelBatchSize">
            <option value="2">2</option>
            <option value="5" selected>5</option>
            <option value="10">10</option>
            <option value="20">20</option>
          </select>
          <button id="wheelMoreBtn" class="btn btn-primary">Mehr Bilder laden</button>
          <button id="wheelResetBtn" class="btn btn-secondary">Zurücksetzen</button>
        </div>

        <div id="wheelNameControls" style="margin-top:0.75rem; display:none;">
          <p class="muted">
            Das Namen-Wheel zieht zufällig einen Namen. Ein Bild mit diesem Namen wird unten hinzugefügt.
          </p>
          <div class="row wrap" style="margin-top:0.5rem; gap:0.5rem;">
            <button id="wheelSpinBtn" class="btn btn-primary">Wheel drehen</button>
            <button id="wheelResetNamesBtn" class="btn btn-secondary btn-small">Namen zurücksetzen</button>
            <span id="wheelCurrentName" class="muted"></span>
          </div>
          <div id="wheelVisual">
            <div id="wheelCircle"></div>
            <div id="wheelPointer"></div>
          </div>
          <div id="wheelNamesList" class="tagRow" style="margin-top:0.5rem;"></div>
        </div>

        <div id="wheelGrid" class="wheelGrid" style="margin-top:1rem;">
          <p class="muted">
            Noch keine Bilder angezeigt. Klicke auf „Mehr Bilder laden“ oder benutze das Namen-Wheel.
          </p>
        </div>
      </div>
    </section>

    <!-- Settings -->
    <section id="settings" class="tabPanel">
      <div class="card">
        <h2>Backup &amp; Daten</h2>
        <p class="muted">Exportiere oder importiere deine Daten als JSON-Backup.</p>
        <div style="margin-top:0.6rem;" class="row wrap">
          <button id="exportBackupBtn" class="btn btn-secondary btn-small">Backup exportieren</button>
          <label class="btn btn-secondary btn-small" style="cursor:pointer;">
            Backup importieren
            <input id="importBackupInput" type="file" accept="application/json" style="display:none;" />
          </label>
          <span id="backupInfo" class="muted"></span>
        </div>

        <div style="margin-top:0.9rem;">
          <button id="toggleDangerZone" class="btn btn-secondary btn-small danger">Gefahrenzone anzeigen</button>
        </div>

        <div id="dangerZone" style="margin-top:0.7rem; display:none;">
          <p class="muted danger">Achtung: Diese Aktionen können nicht rückgängig gemacht werden.</p>
          <div class="row wrap" style="margin-top:0.4rem; gap:0.5rem;">
            <button id="clearAllEntries" class="btn btn-secondary btn-small danger">Alle Einträge löschen</button>
            <button id="clearImageUrlsBtn" class="btn btn-secondary btn-small danger">Alle Bild-URLs löschen</button>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Bild-Pool für wcloud-wheel</h2>
        <p class="muted">
          Hier verwaltest du die Bild-URLs für das Wheel. Jeder URL kann optional ein Name zugeordnet werden.
          Unbenannte Bilder werden automatisch als „Wcloud-Star“ behandelt.
        </p>

        <div class="row wrap" style="margin-top:0.75rem; gap:0.5rem;">
          <input id="imageUrlInput" type="url" placeholder="https://beispiel.de/bild.jpg" style="flex:2 1 220px;" />
          <input id="imageNameInput" type="text" placeholder="Optionaler Name (z.B. Person oder Kategorie)" style="flex:1 1 180px;" />
          <button id="addImageUrlBtn" class="btn btn-primary">URL hinzufügen</button>
        </div>

        <p id="imagePoolInfo" class="muted" style="margin-top:0.65rem;"></p>

        <div id="imagePoolGrid" class="wheelGridInner" style="margin-top:0.4rem;"></div>
      </div>
    </section>
  </div>

  <div id="imageLightbox">
    <div id="lightboxInner">
      <button id="lightboxClose">✕</button>
      <button id="lightboxPrev">‹</button>
      <button id="lightboxNext">›</button>
      <img id="lightboxImage" src="" alt="Bild" />
    </div>
  </div>

  <footer>
    Hinweis: Dieses Tool ist nur zur privaten Selbstbeobachtung gedacht. Keine minderjährigen oder illegalen Inhalte.
    Alle Daten bleiben lokal in deinem Browser und werden nicht auf einen Server hochgeladen.
  </footer>

  <script src="app.js"></script>
</body>
</html>
